"use strict";var _ipcRenderer,_shell,ipcRenderer=()=>_ipcRenderer=_ipcRenderer||require("electron").ipcRenderer,shell=()=>_shell=_shell||require("electron").shell;class HelpReducer{constructor(e,t,s){this.$location=e,this.$window=t,this.store=s,this.menuList=["about","voicecode","trouble","update","uninstall","backup","license","catalina","contact","funclist","play","tuna","writing","dataconfig","dragout","multivoice","dictionary","history","shortcut","help","fcpx-ixml","expand"],this.observers=[]}locationChangeSuccess(){if(this.$location.url().startsWith("/%23"))return void(this.$window.location.href=this.$location.absUrl().replace("%23","#"));const e=this.$location.hash();this.menuList.includes(e)?this.store.display=e:this.store.display="about",this.notifyUpdates({display:this.store.display})}onShortcut(e){switch(e){case"moveToPreviousHelp":this.moveToPreviousHelp(),this.notifyUpdates({});break;case"moveToNextHelp":this.moveToNextHelp(),this.notifyUpdates({})}}moveToPreviousHelp(){const e=this.menuList.indexOf(this.store.display),t=e-1;e<0?this.page(this.menuList[0]):t<0?this.page(this.menuList[this.menuList.length-1]):this.page(this.menuList[t])}moveToNextHelp(){const e=this.menuList.indexOf(this.store.display),t=e+1;e<0?this.page(this.menuList[0]):t>=this.menuList.length?this.page(this.menuList[0]):this.page(this.menuList[t])}page(e){this.$location.hash(e)}openSearchForm(){ipcRenderer().send("showHelpSearchDialog","show help search dialog")}browser(e){this.store.onElectron?shell().openExternal(e):this.$window.open(e)}showItemInFolder(e){if(this.store.onElectron){const t=require("electron").remote.app.getPath("home"),s=e.replace("$HOME",t);shell().showItemInFolder(s)}}showSystemWindow(){this.store.onElectron&&ipcRenderer().send("showSystemWindow","system")}addObserver(e){this.observers.push(e)}notifyUpdates(e){for(let t of this.observers)t.update(e)}}angular.module("helpReducers",["helpStores"]).service("HelpReducer",["$location","$window","HelpStore",HelpReducer]);